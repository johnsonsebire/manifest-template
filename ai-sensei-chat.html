<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sensei Chat - Minimal Interface</title>
    <meta name="description" content="Minimal AI Sensei chat interface for embedded use or standalone chat experience.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/logos/favicon.png">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anybody:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Anime.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <style>
        /* Preloader Styles */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            overflow: hidden;
        }

        .preloader-container {
            text-align: center;
            position: relative;
            z-index: 10001;
        }

        .preloader-bg-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff2200, #ff5533, #ff2200, #cc1100);
            background-size: 400% 400%;
            animation: gradientShift 3s ease-in-out infinite;
            opacity: 0.1;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .preloader-content {
            position: relative;
            z-index: 10002;
        }

        .preloader-logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .preloader-logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 34, 0, 0.1), transparent);
            animation: shimmer 2s linear infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .preloader-logo img {
            width: 60px;
            height: auto;
            filter: brightness(0) invert(1);
            position: relative;
            z-index: 1;
        }

        .preloader-dots {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin: 30px 0;
        }

        .preloader-dot {
            width: 12px;
            height: 12px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: dotBounce 1.4s ease-in-out infinite both;
        }

        .preloader-dot:nth-child(1) { animation-delay: -0.32s; }
        .preloader-dot:nth-child(2) { animation-delay: -0.16s; }
        .preloader-dot:nth-child(3) { animation-delay: 0s; }

        @keyframes dotBounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .preloader-progress {
            width: 250px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 30px auto 20px;
            overflow: hidden;
            position: relative;
        }

        .preloader-progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ff2200, #ff5533);
            border-radius: 2px;
            position: relative;
        }

        .preloader-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: progressShine 1.5s ease-in-out infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .preloader-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.5px;
            margin-top: 15px;
        }

        .preloader-rotating-border {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            border: 2px solid transparent;
            border-top: 2px solid rgba(255, 34, 0, 0.6);
            border-right: 2px solid rgba(255, 34, 0, 0.3);
            border-radius: 50%;
            animation: rotateClockwise 3s linear infinite;
        }

        .preloader-rotating-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid transparent;
            border-bottom: 2px solid rgba(255, 85, 51, 0.4);
            border-left: 2px solid rgba(255, 85, 51, 0.2);
            border-radius: 50%;
            animation: rotateCounterClockwise 2s linear infinite;
        }

        @keyframes rotateClockwise {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes rotateCounterClockwise {
            from { transform: rotate(0deg); }
            to { transform: rotate(-360deg); }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Dark Theme (default) */
            --bg-primary: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            --bg-sidebar: rgba(0, 0, 0, 0.3);
            --bg-chat: rgba(255, 255, 255, 0.03);
            --bg-header: rgba(0, 0, 0, 0.2);
            --bg-input: rgba(0, 0, 0, 0.2);
            --bg-message-ai: rgba(255, 255, 255, 0.08);
            --bg-message-user: linear-gradient(135deg, #ff2200, #ff5533);
            --bg-button: rgba(255, 255, 255, 0.05);
            --bg-button-hover: rgba(255, 255, 255, 0.1);
            --border-primary: rgba(255, 255, 255, 0.1);
            --border-input: rgba(255, 255, 255, 0.1);
            --text-primary: #fff;
            --text-secondary: #ccc;
            --text-muted: #999;
            --accent-primary: #ff2200;
        }

        body.light-theme {
            /* Light Theme - Improved */
            --bg-primary: linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #ffffff 100%);
            --bg-sidebar: rgba(255, 255, 255, 0.95);
            --bg-chat: rgba(248, 250, 252, 0.8);
            --bg-header: rgba(255, 255, 255, 0.95);
            --bg-input: rgba(255, 255, 255, 0.95);
            --bg-message-ai: rgba(241, 245, 249, 0.8);
            --bg-message-user: linear-gradient(135deg, #ff2200, #ff5533);
            --bg-button: rgba(241, 245, 249, 0.6);
            --bg-button-hover: rgba(226, 232, 240, 0.8);
            --border-primary: rgba(148, 163, 184, 0.3);
            --border-input: rgba(100, 116, 139, 0.25);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --accent-primary: #ff2200;
        }

        body {
            font-family: 'Anybody', sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        body.light-theme .minimal-logo img {
            filter: invert(0);
        }

        body.light-theme .minimal-header {
            border-bottom-color: var(--border-primary);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        /* Light theme specific improvements */
        body.light-theme .starter-button:hover {
            background: rgba(255, 34, 0, 0.08);
            border-color: rgba(255, 34, 0, 0.2);
            color: var(--accent-primary);
        }

        body.light-theme .capability-item {
            color: var(--text-secondary);
        }

        body.light-theme .clear-chat-btn {
            background: rgba(255, 34, 0, 0.05);
            border-color: rgba(255, 34, 0, 0.2);
        }

        body.light-theme .clear-chat-btn:hover {
            background: rgba(255, 34, 0, 0.1);
            border-color: var(--accent-primary);
        }

        body.light-theme .quick-action-btn:hover {
            background: rgba(255, 34, 0, 0.08);
            border-color: rgba(255, 34, 0, 0.2);
            color: var(--accent-primary);
        }

        body.light-theme .suggestion-card {
            background: rgba(241, 245, 249, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.3);
            backdrop-filter: blur(10px);
        }

        body.light-theme .suggestion-card:hover {
            background: rgba(226, 232, 240, 0.95);
            border-color: rgba(255, 34, 0, 0.4);
        }

        body.light-theme .suggestion-card .suggestion-title {
            color: var(--text-primary);
        }

        body.light-theme .suggestion-card .suggestion-text {
            color: var(--text-secondary);
        }

        body.light-theme .suggestion-card i {
            color: var(--accent-primary);
        }

        body.light-theme .suggestion-card:hover i {
            color: #ff3311;
        }

        body.light-theme .chat-input {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(148, 163, 184, 0.3);
        }

        body.light-theme .chat-input:focus {
            background: rgba(255, 255, 255, 0.95);
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(255, 34, 0, 0.1);
        }

        body.light-theme .voice-btn {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(148, 163, 184, 0.3);
            color: var(--text-secondary);
        }

        body.light-theme .voice-btn:hover {
            background: rgba(241, 245, 249, 0.9);
            color: var(--text-primary);
        }

        body.light-theme .chat-title {
            color: var(--text-primary);
        }

        body.light-theme .chat-subtitle {
            color: var(--text-secondary);
        }

        body.light-theme .ai-avatar {
            box-shadow: none;
            animation: none;
        }

        /* Light theme welcome message improvements */
        body.light-theme .welcome-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            margin: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        body.light-theme .welcome-title {
            color: var(--text-primary);
        }

        body.light-theme .welcome-subtitle {
            color: var(--text-secondary);
        }

        body.light-theme .welcome-icon {
            color: var(--accent-primary);
        }

        /* Logo Header */
        .minimal-header {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1050;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            width: 280px;
        }

        .minimal-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
            text-decoration: none;
            font-weight: 700;
            font-size: 18px;
        }

        .minimal-logo img {
            height: 30px;
            filter: invert(1);
        }

        /* Header Controls */
        .header-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1050;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .theme-toggle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: var(--bg-button);
            border: 1px solid var(--border-primary);
            border-radius: 50%;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-button-hover);
            border-color: var(--accent-primary);
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 34, 0, 0.1);
            border: 1px solid rgba(255, 34, 0, 0.3);
            border-radius: 25px;
            color: #ff2200;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 34, 0, 0.2);
            border-color: #ff2200;
            color: #ff3311;
        }

        /* Chat Container */
        .chat-container {
            height: 100vh;
            display: flex;
            background: transparent;
            overflow: hidden;
        }

        /* Chat Sidebar */
        .chat-sidebar {
            width: 320px;
            background: var(--bg-sidebar);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--border-primary);
            color: var(--text-primary);
            padding: 0 20px 30px;
            overflow-y: auto;
            position: relative;
            /* Create mask to hide content behind logo */
            -webkit-mask: linear-gradient(to bottom, transparent 0%, transparent 60px, black 80px, black 100%);
            mask: linear-gradient(to bottom, transparent 0%, transparent 60px, black 80px, black 100%);
        }

        .sidebar-content {
            padding-top: 80px; /* Space for fixed logo */
            min-height: calc(100vh - 110px); /* Ensure full height minus top/bottom padding */
        }

        .ai-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #ff2200, #ff5533);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            box-shadow: 0 15px 40px rgba(255, 34, 0, 0.4);
            animation: pulse 2s ease-in-out infinite;
        }

        .ai-avatar i {
            font-size: 45px;
            color: #fff;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 15px 40px rgba(255, 34, 0, 0.4);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 15px 40px rgba(255, 34, 0, 0.7);
                transform: scale(1.05);
            }
        }

        .ai-title {
            font-size: 28px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #ff2200, #ff5533);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .ai-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 40px;
        }

        .sidebar-section {
            margin-bottom: 35px;
        }

        .sidebar-section h4 {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .starter-button {
            display: block;
            width: 100%;
            text-align: left;
            background: var(--bg-button);
            border: 1px solid var(--border-primary);
            color: var(--text-secondary);
            padding: 15px 18px;
            border-radius: 12px;
            margin-bottom: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .starter-button:hover {
            background: rgba(255, 34, 0, 0.1);
            border-color: rgba(255, 34, 0, 0.4);
            color: #fff;
            transform: translateX(5px);
        }

        .capability-item {
            padding: 12px 0;
            font-size: 15px;
            color: #999;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .capability-item i {
            color: #ff2200;
            width: 18px;
            font-size: 16px;
        }

        .clear-chat-btn {
            width: 100%;
            background: rgba(255, 34, 0, 0.1);
            border: 1px solid rgba(255, 34, 0, 0.3);
            color: #ff2200;
            padding: 15px 18px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-chat-btn:hover {
            background: rgba(255, 34, 0, 0.2);
            border-color: #ff2200;
            transform: translateY(-2px);
        }

        /* Main Chat Area */
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-chat);
            backdrop-filter: blur(10px);
        }

        .chat-header {
            padding: 30px;
            padding-top: 90px;
            background: var(--bg-header);
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-status {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: #22c55e;
            border-radius: 50%;
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        .chat-title {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
        }

        .chat-subtitle {
            font-size: 16px;
            color: #ccc;
        }

        /* Message Area */
        .messages-container {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .message {
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .message-avatar.ai {
            background: linear-gradient(135deg, #ff2200, #ff5533);
            color: #fff;
        }

        .message-avatar.user {
            background: rgba(255, 255, 255, 0.1);
            color: #ccc;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .message-content {
            max-width: 70%;
            padding: 18px 22px;
            border-radius: 20px;
            font-size: 16px;
            line-height: 1.6;
            position: relative;
        }

        .message-content.ai {
            background: var(--bg-message-ai);
            border: 1px solid var(--border-primary);
            border-bottom-left-radius: 8px;
            color: var(--text-primary);
        }

        .message-content.user {
            background: var(--bg-message-user);
            color: #fff;
            border-bottom-right-radius: 8px;
        }

        .message-time {
            font-size: 13px;
            opacity: 0.7;
            margin-top: 8px;
        }

        .typing-indicator {
            display: none;
            flex-direction: column;
            gap: 15px;
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }

        .typing-indicator .message {
            margin-bottom: 0;
        }

        .typing-dots {
            display: flex;
            gap: 6px;
            padding: 18px 22px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            border-bottom-left-radius: 8px;
        }

        .typing-dot {
            width: 10px;
            height: 10px;
            background: #ccc;
            border-radius: 50%;
            animation: typing 1.4s ease-in-out infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-12px);
            }
        }

        /* Input Area */
        .chat-input-container {
            padding: 30px;
            background: var(--bg-input);
            border-top: 1px solid var(--border-primary);
        }

        .quick-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            padding: 10px 18px;
            background: var(--bg-button);
            border: 1px solid var(--border-primary);
            color: var(--text-secondary);
            border-radius: 25px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action-btn:hover {
            background: rgba(255, 34, 0, 0.1);
            border-color: rgba(255, 34, 0, 0.4);
            color: #ff2200;
        }

        .chat-input-form {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 18px 25px;
            background: var(--bg-button);
            border: 1px solid var(--border-input);
            border-radius: 30px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: 'Anybody', sans-serif;
            resize: none;
            transition: all 0.3s ease;
            min-height: 55px;
            max-height: 120px;
            overflow: hidden;
        }

        .chat-input:focus {
            outline: none;
            background: var(--bg-button-hover);
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(255, 34, 0, 0.2);
        }

        .chat-input::placeholder {
            color: var(--text-muted);
        }

        .input-actions {
            display: flex;
            gap: 10px;
        }

        .voice-btn, .send-btn {
            width: 55px;
            height: 55px;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
        }

        .voice-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc;
        }

        .voice-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .voice-btn.recording {
            background: #ef4444;
            border-color: #ef4444;
            color: #fff;
            animation: pulse 1s ease-in-out infinite;
        }

        .send-btn {
            background: linear-gradient(135deg, #ff2200, #ff5533);
            border: 1px solid #ff2200;
            color: #fff;
        }

        .send-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff3311, #ff6644);
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            color: #666;
            cursor: not-allowed;
        }

        /* Welcome Message */
        .welcome-container {
            text-align: center;
            padding: 60px 30px 40px;
            color: #ccc;
            min-height: calc(100vh - 200px);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .welcome-icon {
            font-size: 70px;
            color: #ff2200;
            margin-bottom: 20px;
        }

        .welcome-title {
            font-size: 30px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 12px;
        }

        .welcome-subtitle {
            font-size: 17px;
            margin-bottom: 35px;
        }

        .welcome-suggestions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
            max-width: 550px;
            margin: 0 auto;
        }

        .suggestion-card {
            padding: 22px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .suggestion-card:hover {
            background: rgba(255, 34, 0, 0.1);
            border-color: rgba(255, 34, 0, 0.4);
            color: #fff;
            transform: translateY(-8px);
        }

        .suggestion-card i {
            font-size: 24px;
            margin-bottom: 15px;
            color: #ff2200;
        }

        .suggestion-card:hover i {
            color: #ff3311;
        }

        .suggestion-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #fff;
        }

        .suggestion-text {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Responsive */
        /* Medium screens (laptops) */
        @media (max-width: 1400px) and (min-width: 993px) {
            .chat-sidebar {
                width: 280px;
            }

            .minimal-header {
                width: 240px;
            }

            .welcome-container {
                padding: 60px 20px;
            }

            .welcome-suggestions {
                max-width: 500px;
                gap: 15px;
            }

            .suggestion-card {
                padding: 20px;
            }
        }

        @media (max-width: 992px) {
            .chat-sidebar {
                position: fixed;
                left: -320px;
                top: 0;
                height: 100vh;
                z-index: 1040;
                transition: left 0.3s ease;
                width: 280px;
                padding: 0 15px 20px;
                /* Adjust mask for mobile with smaller logo area */
                -webkit-mask: linear-gradient(to bottom, transparent 0%, transparent 55px, black 75px, black 100%);
                mask: linear-gradient(to bottom, transparent 0%, transparent 55px, black 75px, black 100%);
            }

            .sidebar-content {
                padding-top: 80px;
            }

            .chat-sidebar.show {
                left: 0;
            }

            .chat-main {
                width: 100%;
            }

            .minimal-header {
                left: 15px;
                top: 15px;
            }

            .header-controls {
                right: 15px;
                top: 15px;
                gap: 8px;
            }

            .theme-toggle {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .back-btn {
                padding: 8px 16px;
                font-size: 13px;
            }

            .chat-header {
                padding: 20px;
                padding-top: 70px;
            }
        }

        /* Laptop specific adjustments */
        @media (max-width: 1200px) and (min-width: 993px) {
            .welcome-title {
                font-size: 28px;
            }

            .welcome-subtitle {
                font-size: 16px;
            }

            .messages-container {
                padding: 25px;
            }

            .chat-header {
                padding: 25px;
                padding-top: 80px;
            }

            .chat-input-container {
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            .messages-container {
                padding: 20px;
            }

            .chat-input-container {
                padding: 20px;
            }

            .message-content {
                max-width: 85%;
            }

            .welcome-suggestions {
                grid-template-columns: 1fr;
            }

            .welcome-container {
                padding: 60px 20px;
            }

            .quick-actions {
                gap: 8px;
            }

            .quick-action-btn {
                font-size: 12px;
                padding: 8px 15px;
            }

            .ai-avatar {
                width: 80px;
                height: 80px;
            }

            .ai-avatar i {
                font-size: 35px;
            }
        }

        /* Custom Scrollbar */
        .messages-container::-webkit-scrollbar,
        .chat-sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .messages-container::-webkit-scrollbar-track,
        .chat-sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .messages-container::-webkit-scrollbar-thumb,
        .chat-sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 73, 0, 0.95);
            border-radius: 3px;
        }

        .messages-container::-webkit-scrollbar-thumb:hover,
        .chat-sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 73, 0, 0.95);
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="preloader-bg-animation"></div>
        <div class="preloader-rotating-border"></div>
        <div class="preloader-container">
            <div class="preloader-content">
                <div class="preloader-logo">
                    <img src="images/logos/logo.png" alt="Manifest Digital">
                </div>
                <div class="preloader-dots">
                    <div class="preloader-dot"></div>
                    <div class="preloader-dot"></div>
                    <div class="preloader-dot"></div>
                </div>
                <div class="preloader-progress">
                    <div class="preloader-progress-bar"></div>
                </div>
                <div class="preloader-text">Loading amazing experiences...</div>
            </div>
        </div>
    </div>

    <!-- Notification Topbar -->
    <div class="notification-topbar">
        <span class="notification-icon">🎉</span>
        <div class="notification-content">
            <span class="notification-text">
                Launch Special: First month 20% off + free brand consultation (GH₵500 value) • Limited spots available
            </span>
            <a href="#" class="notification-cta">Claim Offer</a>
        </div>
        <button class="notification-close" aria-label="Close notification">×</button>
    </div>

    <!-- Minimal Header -->
    <div class="minimal-header">
        <a href="index.html" class="minimal-logo">
            <img src="images/logos/logo.png" alt="Manifest Digital">
        </a>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
            <i class="fas fa-sun" id="themeIcon"></i>
        </button>
        <a href="ai-chat.html" class="back-btn">
            <i class="fas fa-external-link-alt"></i>
            <span>Full Site</span>
        </a>
    </div>

    <!-- Chat Container -->
    <div class="chat-container">
        <!-- Sidebar -->
        <div class="chat-sidebar" id="chatSidebar">
            <div class="sidebar-content">
                <!-- AI Avatar -->
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <h2 class="ai-title">AI Sensei</h2>
                <p class="ai-subtitle">Your Digital Business Assistant</p>

                <!-- Conversation Starters -->
                <div class="sidebar-section">
                    <h4><i class="fas fa-comments"></i> Quick Start</h4>
                    <button class="starter-button" onclick="sendQuickMessage('Tell me about your web development services')">
                        💻 Web Development Services
                    </button>
                    <button class="starter-button" onclick="sendQuickMessage('What digital marketing strategies do you recommend?')">
                        📱 Digital Marketing Tips
                    </button>
                    <button class="starter-button" onclick="sendQuickMessage('How can I improve my business online presence?')">
                        🚀 Business Growth Ideas
                    </button>
                    <button class="starter-button" onclick="sendQuickMessage('What are the latest web design trends?')">
                        🎨 Design Trends 2024
                    </button>
                </div>

                <!-- AI Capabilities -->
                <div class="sidebar-section">
                    <h4><i class="fas fa-brain"></i> I Can Help With</h4>
                    <div class="capability-item">
                        <i class="fas fa-code"></i>
                        <span>Web Development</span>
                    </div>
                    <div class="capability-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Digital Marketing</span>
                    </div>
                    <div class="capability-item">
                        <i class="fas fa-palette"></i>
                        <span>UI/UX Design</span>
                    </div>
                    <div class="capability-item">
                        <i class="fas fa-search"></i>
                        <span>SEO Optimization</span>
                    </div>
                    <div class="capability-item">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Mobile Apps</span>
                    </div>
                    <div class="capability-item">
                        <i class="fas fa-lightbulb"></i>
                        <span>Business Strategy</span>
                    </div>
                </div>

                <!-- Clear Chat -->
                <div class="sidebar-section">
                    <button class="clear-chat-btn" onclick="clearChat()">
                        <i class="fas fa-trash"></i> Clear Chat History
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Chat -->
        <div class="chat-main">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-status">
                    <div class="status-dot"></div>
                    <div>
                        <div class="chat-title">AI Sensei Chat</div>
                        <div class="chat-subtitle">Online • Ready to help</div>
                    </div>
                </div>
                <button class="btn btn-outline-light d-lg-none" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- Messages Container -->
            <div class="messages-container" id="messagesContainer">
                <!-- Welcome Message -->
                <div class="welcome-container" id="welcomeContainer">
                    <div class="welcome-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3 class="welcome-title">Welcome to AI Sensei!</h3>
                    <p class="welcome-subtitle">I'm here to help with all your digital business questions. What would you like to know?</p>
                    
                    <div class="welcome-suggestions">
                        <div class="suggestion-card" onclick="sendQuickMessage('How can I start an online business?')">
                            <i class="fas fa-rocket"></i>
                            <div class="suggestion-title">Start Online Business</div>
                            <div class="suggestion-text">Get tips for launching your digital presence</div>
                        </div>
                        <div class="suggestion-card" onclick="sendQuickMessage('What is the cost of website development?')">
                            <i class="fas fa-dollar-sign"></i>
                            <div class="suggestion-title">Website Pricing</div>
                            <div class="suggestion-text">Learn about development costs</div>
                        </div>
                        <div class="suggestion-card" onclick="sendQuickMessage('How do I improve my website SEO?')">
                            <i class="fas fa-search"></i>
                            <div class="suggestion-title">SEO Tips</div>
                            <div class="suggestion-text">Boost your search rankings</div>
                        </div>
                        <div class="suggestion-card" onclick="sendQuickMessage('What social media strategy works best?')">
                            <i class="fas fa-share-alt"></i>
                            <div class="suggestion-title">Social Media</div>
                            <div class="suggestion-text">Effective marketing strategies</div>
                        </div>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator">
                    <div class="message">
                        <div class="message-avatar ai">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Container -->
            <div class="chat-input-container">
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-action-btn" onclick="sendQuickMessage('Hello!')">👋 Say Hello</button>
                    <button class="quick-action-btn" onclick="sendQuickMessage('Tell me about your services')">🔍 Your Services</button>
                    <button class="quick-action-btn" onclick="sendQuickMessage('Book a consultation call')">📞 Book Call</button>
                    <button class="quick-action-btn" onclick="sendQuickMessage('Show me your portfolio')">💼 Portfolio</button>
                    <button class="quick-action-btn" onclick="sendQuickMessage('What are your pricing plans?')">💰 Pricing</button>
                </div>

                <!-- Input Form -->
                <form class="chat-input-form" id="chatForm">
                    <textarea 
                        class="chat-input" 
                        id="messageInput" 
                        placeholder="Ask me anything about web development, marketing, or business growth..."
                        rows="1"
                    ></textarea>
                    <div class="input-actions">
                        <button type="button" class="voice-btn" id="voiceBtn" onclick="toggleVoiceInput()">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button type="submit" class="send-btn" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Chat functionality (same as full version)
        let chatHistory = [];
        let isVoiceRecording = false;

        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const isLightTheme = body.classList.contains('light-theme');
            
            if (isLightTheme) {
                body.classList.remove('light-theme');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('aiSenseiTheme', 'dark');
            } else {
                body.classList.add('light-theme');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('aiSenseiTheme', 'light');
            }
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('aiSenseiTheme');
            const themeIcon = document.getElementById('themeIcon');
            
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                themeIcon.className = 'fas fa-moon';
            } else {
                themeIcon.className = 'fas fa-sun';
            }
        }

        // Initialize chat
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            loadChatHistory();
            adjustTextareaHeight();
            
            // Auto-resize textarea
            const messageInput = document.getElementById('messageInput');
            messageInput.addEventListener('input', adjustTextareaHeight);
            
            // Handle Enter key (Shift+Enter for new line, Enter to send)
            messageInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        });

        // Chat form submission
        document.getElementById('chatForm').addEventListener('submit', function(e) {
            e.preventDefault();
            sendMessage();
        });

        function adjustTextareaHeight() {
            const textarea = document.getElementById('messageInput');
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            // Hide typing indicator first (in case there's already one showing)
            hideTypingIndicator();
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            messageInput.value = '';
            adjustTextareaHeight();
            
            // Hide welcome container
            document.getElementById('welcomeContainer').style.display = 'none';
            
            // Show typing indicator AFTER user message
            showTypingIndicator();
            
            // Simulate AI response (replace with actual API call)
            setTimeout(() => {
                const response = generateAIResponse(message);
                hideTypingIndicator();
                addMessage(response, 'ai');
                saveChatHistory();
            }, 1000 + Math.random() * 2000); // Random delay 1-3 seconds
        }

        function sendQuickMessage(message) {
            document.getElementById('messageInput').value = message;
            sendMessage();
        }

        function addMessage(content, sender) {
            const messagesContainer = document.getElementById('messagesContainer');
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}`;
            
            const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            messageElement.innerHTML = `
                <div class="message-avatar ${sender}">
                    <i class="fas fa-${sender === 'ai' ? 'robot' : 'user'}"></i>
                </div>
                <div class="message-content ${sender}">
                    ${content.replace(/\n/g, '<br>')}
                    <div class="message-time">${currentTime}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Add to chat history
            chatHistory.push({
                content: content,
                sender: sender,
                timestamp: new Date().toISOString()
            });
        }

        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            const messagesContainer = document.getElementById('messagesContainer');
            
            // Hide any existing typing indicator
            typingIndicator.style.display = 'none';
            
            // Move typing indicator to the end of messages container
            messagesContainer.appendChild(typingIndicator);
            
            // Show typing indicator
            typingIndicator.style.display = 'flex';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'none';
        }

        function generateAIResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Simple response generation based on keywords
            if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                return "Hello! 👋 I'm AI Sensei, your digital business assistant. I'm here to help you with web development, digital marketing, business growth strategies, and more. What can I help you with today?";
            }
            
            if (message.includes('web development') || message.includes('website')) {
                return "Great question about web development! 💻 At Manifest, we offer comprehensive web development services including:\\n\\n• Custom WordPress Development\\n• E-commerce Solutions\\n• Progressive Web Apps\\n• API Development\\n• Website Maintenance\\n\\nOur development process focuses on performance, security, and user experience. Would you like to know more about any specific service or discuss your project requirements?";
            }
            
            if (message.includes('digital marketing') || message.includes('marketing')) {
                return "Digital marketing is crucial for business growth! 📱 Here are some key strategies I recommend:\\n\\n• Content Marketing & SEO\\n• Social Media Management\\n• Email Marketing Campaigns\\n• Pay-Per-Click Advertising\\n• Analytics & Performance Tracking\\n\\nThe best strategy depends on your target audience and business goals. What type of business are you looking to promote?";
            }
            
            if (message.includes('pricing') || message.includes('cost') || message.includes('price')) {
                return "Our pricing is tailored to each project's unique requirements! 💰 Here's a general overview:\\n\\n• Basic Website: $500 - $2,000\\n• E-commerce Site: $2,000 - $10,000\\n• Custom Web App: $5,000 - $50,000\\n• Digital Marketing: $500 - $5,000/month\\n\\nFactors affecting cost include complexity, features, timeline, and ongoing support. Would you like a detailed quote for your specific project? I can connect you with our team for a free consultation!";
            }
            
            if (message.includes('seo') || message.includes('search')) {
                return "SEO is essential for online visibility! 🔍 Here are key strategies to improve your search rankings:\\n\\n• Keyword Research & Optimization\\n• Quality Content Creation\\n• Technical SEO (site speed, mobile-friendly)\\n• Local SEO for businesses\\n• Link Building & Authority\\n\\nSEO is a long-term investment that typically shows results in 3-6 months. Would you like me to analyze your current website or discuss a custom SEO strategy?";
            }
            
            if (message.includes('portfolio') || message.includes('projects') || message.includes('work')) {
                return "I'd love to show you our work! 💼 We've completed 50+ successful projects including:\\n\\n• KokoPlus - Fintech Mobile App\\n• Alpha Health Group - Healthcare Platform\\n• Bosch School - Educational Website\\n• CCEM Ghana - NGO Digital Presence\\n\\nEach project showcases our expertise in different industries. You can view our full portfolio at manifestghana.com/projects or I can discuss specific case studies relevant to your industry. What type of business are you in?";
            }
            
            if (message.includes('book') || message.includes('call') || message.includes('consultation') || message.includes('meeting')) {
                return "Perfect! I'd be happy to help you schedule a consultation! 📞 Here are your options:\\n\\n• Free Strategy Call (30 minutes)\\n• Technical Consultation (60 minutes)\\n• Project Planning Session (90 minutes)\\n\\nDuring the call, we'll discuss your goals, challenges, and how we can help. You can book directly at manifestghana.com/book-a-call or I can have our team contact you. Which option works best for you?";
            }
            
            if (message.includes('mobile app') || message.includes('app development')) {
                return "Mobile app development is one of our specialties! 📱 We create:\\n\\n• Native iOS & Android Apps\\n• Cross-Platform Solutions (React Native, Flutter)\\n• Progressive Web Apps (PWAs)\\n• App Store Optimization\\n• Ongoing Maintenance & Updates\\n\\nOur process includes UI/UX design, development, testing, and deployment. Apps typically take 3-8 months depending on complexity. What type of app are you considering?";
            }
            
            if (message.includes('business') || message.includes('grow') || message.includes('online presence')) {
                return "Growing your online presence is key to business success! 🚀 Here's a strategic approach:\\n\\n• Professional Website (your digital headquarters)\\n• Search Engine Optimization (get found online)\\n• Social Media Strategy (engage your audience)\\n• Content Marketing (build authority)\\n• Email Marketing (nurture relationships)\\n• Analytics (measure and improve)\\n\\nThe best strategy depends on your industry and target market. What's your current biggest challenge with online growth?";
            }
            
            // Default response
            return "Thank you for your question! 🤔 I'd be happy to help you with that. As your AI assistant specializing in digital solutions, I can provide guidance on web development, digital marketing, SEO, mobile apps, and business growth strategies.\\n\\nCould you provide a bit more detail about what you're looking for? Or would you prefer to speak with one of our human experts? I can arrange a free consultation call where we can discuss your specific needs in detail.";
        }

        function clearChat() {
            if (confirm('Are you sure you want to clear the chat history?')) {
                chatHistory = [];
                document.getElementById('messagesContainer').innerHTML = `
                    <div class="welcome-container" id="welcomeContainer">
                        <div class="welcome-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3 class="welcome-title">Welcome to AI Sensei!</h3>
                        <p class="welcome-subtitle">I'm here to help with all your digital business questions. What would you like to know?</p>
                        
                        <div class="welcome-suggestions">
                            <div class="suggestion-card" onclick="sendQuickMessage('How can I start an online business?')">
                                <i class="fas fa-rocket"></i>
                                <div class="suggestion-title">Start Online Business</div>
                                <div class="suggestion-text">Get tips for launching your digital presence</div>
                            </div>
                            <div class="suggestion-card" onclick="sendQuickMessage('What is the cost of website development?')">
                                <i class="fas fa-dollar-sign"></i>
                                <div class="suggestion-title">Website Pricing</div>
                                <div class="suggestion-text">Learn about development costs</div>
                            </div>
                            <div class="suggestion-card" onclick="sendQuickMessage('How do I improve my website SEO?')">
                                <i class="fas fa-search"></i>
                                <div class="suggestion-title">SEO Tips</div>
                                <div class="suggestion-text">Boost your search rankings</div>
                            </div>
                            <div class="suggestion-card" onclick="sendQuickMessage('What social media strategy works best?')">
                                <i class="fas fa-share-alt"></i>
                                <div class="suggestion-title">Social Media</div>
                                <div class="suggestion-text">Effective marketing strategies</div>
                            </div>
                        </div>
                    </div>

                    <div class="typing-indicator" id="typingIndicator">
                        <div class="message">
                            <div class="message-avatar ai">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                `;
                localStorage.removeItem('aiSenseiChatHistoryMinimal');
            }
        }

        function toggleVoiceInput() {
            const voiceBtn = document.getElementById('voiceBtn');
            
            if (!isVoiceRecording) {
                // Start recording
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    
                    recognition.continuous = false;
                    recognition.interimResults = false;
                    recognition.lang = 'en-US';
                    
                    recognition.onstart = function() {
                        isVoiceRecording = true;
                        voiceBtn.classList.add('recording');
                        voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
                    };
                    
                    recognition.onresult = function(event) {
                        const transcript = event.results[0][0].transcript;
                        document.getElementById('messageInput').value = transcript;
                        adjustTextareaHeight();
                    };
                    
                    recognition.onend = function() {
                        isVoiceRecording = false;
                        voiceBtn.classList.remove('recording');
                        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    };
                    
                    recognition.onerror = function(event) {
                        console.error('Speech recognition error:', event.error);
                        isVoiceRecording = false;
                        voiceBtn.classList.remove('recording');
                        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    };
                    
                    recognition.start();
                } else {
                    alert('Speech recognition is not supported in your browser.');
                }
            } else {
                // Stop recording (handled by recognition.onend)
                isVoiceRecording = false;
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('chatSidebar');
            sidebar.classList.toggle('show');
        }

        function saveChatHistory() {
            localStorage.setItem('aiSenseiChatHistoryMinimal', JSON.stringify(chatHistory));
        }

        function loadChatHistory() {
            const saved = localStorage.getItem('aiSenseiChatHistoryMinimal');
            if (saved) {
                chatHistory = JSON.parse(saved);
                const messagesContainer = document.getElementById('messagesContainer');
                
                if (chatHistory.length > 0) {
                    document.getElementById('welcomeContainer').style.display = 'none';
                    
                    chatHistory.forEach(msg => {
                        const messageElement = document.createElement('div');
                        messageElement.className = `message ${msg.sender}`;
                        
                        const messageTime = new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                        
                        messageElement.innerHTML = `
                            <div class="message-avatar ${msg.sender}">
                                <i class="fas fa-${msg.sender === 'ai' ? 'robot' : 'user'}"></i>
                            </div>
                            <div class="message-content ${msg.sender}">
                                ${msg.content.replace(/\n/g, '<br>')}
                                <div class="message-time">${messageTime}</div>
                            </div>
                        `;
                        
                        messagesContainer.appendChild(messageElement);
                    });
                    
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }
            }
        }

        // Close sidebar when clicking outside (mobile)
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('chatSidebar');
            const toggleBtn = e.target.closest('[onclick="toggleSidebar()"]');
            
            if (!sidebar.contains(e.target) && !toggleBtn && window.innerWidth <= 992) {
                sidebar.classList.remove('show');
            }
        });

        // Preloader Animation
        document.addEventListener('DOMContentLoaded', function() {
            // Animate progress bar
            anime({
                targets: '.preloader-progress-bar',
                width: '100%',
                duration: 3000,
                easing: 'easeInOutQuad'
            });

            // Animate logo
            anime({
                targets: '.preloader-logo',
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 1000,
                easing: 'easeOutElastic(1, .8)',
                delay: 500
            });

            // Animate dots
            anime({
                targets: '.preloader-dot',
                scale: [0, 1],
                opacity: [0, 1],
                duration: 600,
                delay: anime.stagger(100, {start: 800}),
                easing: 'easeOutElastic(1, .8)'
            });

            // Animate text
            anime({
                targets: '.preloader-text',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 800,
                delay: 1200,
                easing: 'easeOutQuad'
            });

            // Hide preloader and show content
            setTimeout(() => {
                anime({
                    targets: '#preloader',
                    opacity: 0,
                    duration: 800,
                    easing: 'easeInOutQuad',
                    complete: function() {
                        document.getElementById('preloader').style.display = 'none';
                        
                        // Animate main content
                        const mainContent = document.querySelector('body > *:not(#preloader):not(.notification-topbar)');
                        if (mainContent) {
                            anime({
                                targets: mainContent,
                                opacity: [0, 1],
                                translateY: [30, 0],
                                duration: 1000,
                                easing: 'easeOutQuad'
                            });
                        }
                    }
                });
            }, 4500); // Total preloader duration: 4.5 seconds
        });

        // Notification bar timing after preloader
        function showNotificationAfterPreloader() {
            // Check if notification was already closed
            const notificationClosed = localStorage.getItem('notificationClosed');
            
            if (!notificationClosed) {
                setTimeout(() => {
                    const notificationTopbar = document.querySelector('.notification-topbar');
                    if (notificationTopbar) {
                        notificationTopbar.classList.add('show');
                        document.body.classList.add('notification-visible');
                    }
                    
                    // Handle notification close
                    const closeBtn = document.querySelector('.notification-close');
                    if (closeBtn && !closeBtn.hasAttribute('data-listener-added')) {
                        closeBtn.setAttribute('data-listener-added', 'true');
                        closeBtn.addEventListener('click', function() {
                            const notificationTopbar = document.querySelector('.notification-topbar');
                            if (notificationTopbar) {
                                notificationTopbar.classList.remove('show');
                                document.body.classList.remove('notification-visible');
                                localStorage.setItem('notificationClosed', 'true');
                            }
                        });
                    }
                }, 300); // Show notification 300ms after preloader finishes
            }
        }

        // Show notification after preloader completion
        setTimeout(showNotificationAfterPreloader, 4500);
    </script>
</body>
</html>